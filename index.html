<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daily Accountability → Weekly Dashboard</title>
    <link rel="stylesheet" href="styles.css" />

</head>
<body>
<noscript><div class="wrap"><div class="card">This app requires JavaScript to run.</div></div></noscript>
<div class="wrap">
  <div class="card">
    <h1>Daily Accountability → Weekly Dashboard</h1>
    <p class="sub">Daily entry, weekly aggregation, local-only storage, JSON exports.</p>
    <div class="muted" id="weekLabel"></div>
  </div>

  <div class="twoCols">
    <div class="card">
      <h2>Daily entry</h2>
      <div class="row">
        <div>
          <label for="dayDate">Day</label>
          <input id="dayDate" type="date" />
          <div class="small">Pick any day; the dashboard snaps to that week (Mon–Sun).</div>
        </div>
        <div class="small">Daily metrics are generated from active metric definitions for the selected date.</div>
      </div>

      <div class="hr"></div>

      <div id="metricsForm"></div>

      <div class="hr"></div>

      <h3>Weekly structure (tick these any day, but they apply to the week)</h3>
      <div class="checks">
        <div class="check">
          <input id="prioritiesDefined" type="checkbox" />
          <label for="prioritiesDefined" style="margin:0;">3 priorities defined</label>
        </div>
        <div class="check">
          <input id="twoCompleted" type="checkbox" />
          <label for="twoCompleted" style="margin:0;">2 completed</label>
        </div>
        <div class="check">
          <input id="weeklyReviewDone" type="checkbox" />
          <label for="weeklyReviewDone" style="margin:0;">Weekly review done</label>
        </div>
      </div>

      <div class="btns">
        <button id="saveDayBtn">Save day</button>
        <button id="deleteDayBtn" class="danger">Delete this day</button>
        <button id="clearBtn" class="ghost">Clear form</button>
        <span class="pill" id="daySavedPill">Not saved</span>
      </div>
      <div class="footer" id="status"></div>
    </div>

    <div class="card">
      <h2>Weekly dashboard (quick glance)</h2>
      <div class="muted" id="dashWeekRange"></div>
      <div class="hr"></div>

      <div class="gridDash">
        <div class="dashItem">
          <div class="dashK">Sleep avg</div>
          <div class="dashV" id="dashSleep">—</div>
          <div class="dashS" id="dashSleepS">days logged: —</div>
        </div>
        <div class="dashItem">
          <div class="dashK">Caffeine avg</div>
          <div class="dashV" id="dashCaff">—</div>
          <div class="dashS" id="dashCaffS">days logged: —</div>
        </div>
        <div class="dashItem">
          <div class="dashK">Sugar binge days</div>
          <div class="dashV" id="dashSugar">—</div>
          <div class="dashS">count of days ticked</div>
        </div>
        <div class="dashItem">
          <div class="dashK">Movement days</div>
          <div class="dashV" id="dashMove">—</div>
          <div class="dashS">count of days ticked</div>
        </div>

        <div class="dashItem">
          <div class="dashK">DW tech total</div>
          <div class="dashV" id="dashDWTech">—</div>
          <div class="dashS">sessions this week</div>
        </div>
        <div class="dashItem">
          <div class="dashK">DW creative total</div>
          <div class="dashV" id="dashDWCreat">—</div>
          <div class="dashS">sessions this week</div>
        </div>
        <div class="dashItem">
          <div class="dashK">Structure</div>
          <div class="dashV" id="dashStruct">—</div>
          <div class="dashS" id="dashStructS">0/3</div>
        </div>
        <div class="dashItem">
          <div class="dashK">Days logged</div>
          <div class="dashV" id="dashDays">—</div>
          <div class="dashS">out of 7</div>
        </div>
      </div>

      <div class="hr"></div>

      <div class="btns">
        <button id="exportWeekBtn">Export this week JSON</button>
        <button id="exportAllBtn" class="ghost">Export ALL data JSON</button>
        <label class="pill" style="cursor:pointer;">
          Import JSON
          <input id="importFile" type="file" accept="application/json" style="display:none;">
        </label>
      </div>
      <div class="small muted">Weekly export includes summary + raw daily entries. Use it as your “accountability proof”.</div>

      <div class="hr"></div>

      <h3>This week’s days</h3>
      <div style="overflow:auto;">
        <table id="weekDaysTable">
          <thead>
            <tr>
              <th>Date</th>
              <th>Sleep</th>
              <th>Caff</th>
              <th>Sugar</th>
              <th>Move</th>
              <th>DW T</th>
              <th>DW C</th>
              <th>Artifacts</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

    </div>
  </div>

  <div class="card">
    <h2>Weekly history (latest 10)</h2>
    <div class="muted">Click a week to jump your dashboard to it.</div>
    <div class="hr"></div>
    <div style="overflow:auto;">
      <table id="weeksTable">
        <thead>
          <tr>
            <th>Week</th>
            <th>Days</th>
            <th>Sleep avg</th>
            <th>Caff avg</th>
            <th>Sugar</th>
            <th>Move</th>
            <th>DW Tech</th>
            <th>DW Creat</th>
            <th>Structure</th>
            <th class="right">Export</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <div class="card">
    <h2>Metric management</h2>
    <p class="muted">Edits create a new version. Remove retires a metric by setting an end date.</p>
    <div class="row">
      <div>
        <label for="metricEffectiveDate">Effective date</label>
        <input id="metricEffectiveDate" type="date" />
      </div>
    </div>
    <div class="hr"></div>
    <div style="overflow:auto;">
      <table id="metricsTable">
        <thead>
          <tr>
            <th>Metric ID</th>
            <th>Label</th>
            <th>Type</th>
            <th>Group</th>
            <th>Active from</th>
            <th>Active to</th>
            <th class="right">Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

  <script src="app.js" defer></script>
</body>
</html>
